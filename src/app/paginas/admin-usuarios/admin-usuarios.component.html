<p-confirmPopup />

<p-table 
    #dt
    [value]="usuarios" 
    [tableStyle]="{ 'min-width': '50rem' }" 
    styleClass="p-datatable-striped" 
    [paginator]="true"
    [rows]="5"
    [globalFilterFields]="['email', 'rolesStr', 'telefono', 'direccion', 'activoStr']"
    [rowsPerPageOptions]="[5]"
>
    <ng-template pTemplate="caption">
        <div class="flex align-items-center justify-content-between">
            <div></div>
            <span class="p-input-icon-left">
                <i class="pi pi-search"></i>
                <input 
                    pInputText 
                    type="text" 
                    (input)="dt.filterGlobal( $any($event.target).value, 'contains')" 
                    placeholder="Search..." />
            </span>
        </div>
    </ng-template>
    <ng-template pTemplate="header">
        <tr>
            <th></th>
            <th pSortableColumn="email">Email <p-sortIcon field="email" /></th>
            <th pSortableColumn="rolesStr">Roles <p-sortIcon field="rolesStr" /></th>
            <th pSortableColumn="activoStr">Activo <p-sortIcon field="activoStr" /></th>
            <th pSortableColumn="telefono">Teléfono <p-sortIcon field="telefono" /></th>
            <th pSortableColumn="direccion">Dirección Despacho <p-sortIcon field="direccion" /></th>
        </tr>
    </ng-template>
    <ng-template pTemplate="body" let-user>
        <tr>
            <td>
                <div class="flex align-items-center justify-content-center gap-2">
                    <button 
                        pButton 
                        type="button" 
                        size="small"
                        icon="pi pi-trash" 
                        severity="danger"
                        (click)="onRowDelete(user, $event)" 
                        >
                    </button>
                    <button 
                        pButton 
                        type="button" 
                        size="small"
                        [pTooltip]="user.activo ? 'Desactivar' : 'Activar'"
                        icon="pi pi-sync" 
                        [severity]="user.activo ? 'success' : 'danger'"
                        (click)="onRowCambiarEstado(user, $event)" 
                        >
                    </button>
                </div>
            </td>
            <td>{{ user.email }}</td>
            <td>{{ user.rolesStr }}</td>
            <td>{{ user.activoStr }}</td>
            <td>{{ user.telefono }}</td>
            <td>{{ user.direccion }}</td>
        </tr>
    </ng-template>
</p-table>