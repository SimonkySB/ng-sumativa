<div class="py-4">
    <div class="flex justify-content-center">
        <div class="surface-card p-4 shadow-2 border-round w-full lg:w-6 mt-3">

            <div class="flex justify-content-center mb-5 align-items-baseline gap-2">
                <div class="text-900 text-3xl font-medium mb-3">Perfil</div>
                @if (!modoEdicion) {
                <p-button icon="pi pi-pencil" styleClass="h-2rem w-2rem" severity="warning" [text]="true"
                    (onClick)="cambiarModoEdicion(true)" />
                }
                @else {
                <p-button icon="pi pi-times" styleClass="h-2rem w-2rem" severity="danger" [text]="true"
                    (onClick)="cambiarModoEdicion(false)" />
                }
            </div>

            <form [formGroup]="form">
                <div class="mb-3">
                    <label for="telefono" class="block text-900 font-medium mb-2">Teléfono</label>
                    <input id="telefono" formControlName="telefono" type="text" placeholder="+56 9 88359244" pInputText
                        class="w-full" [readOnly]="!modoEdicion">
                    @if (getError("telefono", "required")) {
                    <small class="text-red-700 font-medium">El campo es requerido</small>
                    }
                    @if (getError("telefono", "pattern")) {
                    <small class="text-red-700 font-medium">El teléfono es inválido</small>
                    }
                </div>
                <div>
                    <label for="direccionDespacho" class="block text-900 font-medium mb-2">Dirección de Despacho</label>
                    <input id="direccionDespacho" formControlName="direccionDespacho" type="text" pInputText
                        class="w-full" [readOnly]="!modoEdicion">
                </div>


                <div class="text-center mt-3">
                    <button pButton pRipple label="Actualizar" [disabled]="form.invalid || !modoEdicion"
                        (click)="actualizarPerfil()"></button>
                </div>
            </form>

        </div>
    </div>

    <div class="flex justify-content-center">
        <div class="surface-card p-4 shadow-2 border-round w-full lg:w-6 mt-3">

            <div class="flex justify-content-center mb-5 align-items-baseline gap-2">
                <div class="text-900 text-3xl font-medium mb-3">Actualizar Contraseña</div>
            </div>

            <form [formGroup]="passForm" (ngSubmit)="cambiarPassword()">
                <div class="mb-3">
                    <label for="password" class="block text-900 font-medium mb-2">Contraseña</label>
                    <p-password placeholder="***********" formControlName="password" [toggleMask]="true"
                        inputStyleClass="w-full" styleClass="w-full" [feedback]="false" appendTo="body" />
                    @if (getPassError("password", "required")) {
                    <small class="text-red-700 font-medium">El campo es requerido</small>
                    }
                    @if (getPassError("password", "pattern")) {
                    <small class="text-red-700 font-medium">
                        Debe tener 1 letra minúscula, 1 letra mayúscula, 1 numero, 1 caracter especial y tener de 8 a 15
                        caracteres de largo
                    </small>
                    }
                </div>
                <div class="mb-3">
                    <label for="passwordRepeat" class="block text-900 font-medium mb-2">Repetir Contraseña</label>
                    <p-password placeholder="***********" formControlName="passwordRepeat" [toggleMask]="true"
                        inputStyleClass="w-full" styleClass="w-full" [feedback]="false" appendTo="body" />
                    @if (getPassError("passwordRepeat", "required")) {
                    <small class="text-red-700 font-medium">El campo es requerido</small>
                    }
                    @else if (passForm.getError("passwordMatch")) {
                    <small class="text-red-700 font-medium">
                        Las contraseñas deben coincidir
                    </small>
                    }
                </div>
                <div class="text-center mt-3">
                    <button type="submit" pButton pRipple label="Guardar" [disabled]="passForm.invalid"></button>
                </div>
            </form>

        </div>
    </div>

</div>